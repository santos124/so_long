NAME_B		=	so_long
HEADER_B	=	SRC_B/so_long_bonus.h
LIBFTDIR	=	libft
LIBFT		=	$(LIBFTDIR)/libft.a
LIBMLXDIR	=	mlx
LIBMLX		=	$(LIBMLXDIR)/libmlx.a
CFLAGS		=	-Wall -Werror -Wextra
# -g3 -fsanitize=address
CC			=	clang

SRC_B			=	SRC_B/main_bonus.c SRC_B/moves_bonus.c SRC_B/errors_bonus.c\
				SRC_B/read_map_bonus.c SRC_B/free_bonus.c SRC_B/render_bonus.c\
				SRC_B/load_files.c SRC_B/valid_map_bonus.c

OBJ_B			=	$(SRC_B:.c=.o)

all			:	$(NAME_B)

$(NAME_B)		:	$(OBJ_B) $(LIBFT) $(LIBMLX) $(HEADER_B) Makefile_b
			$(CC) $(CFLAGS)\
			-lmlx -framework OpenGL -framework Appkit\
			$(LIBFT) $(LIBMLX) $(OBJ_B) -o $(NAME_B)

$(LIBFT)	: Makefile_b $(LIBFTDIR)/libft.h $(LIBFTDIR)/Makefile $(LIBFTDIR)
			make -C $(LIBFTDIR)

$(LIBMLX)	: Makefile_b
			make -C $(LIBMLXDIR)

%.o			:	%.c Makefile_b $(HEADER)
			$(CC) $(CFLAGS) -c $< -o $@

clean		:
			@rm -f $(OBJ_B)
			@make -C $(LIBFTDIR) clean
			@make -C $(LIBMLXDIR) clean

fclean		:	clean
			@rm -f $(LIBMLX)
			@rm -f $(LIBFT)
			@rm -f $(NAME_B)

re			:	fclean all

.PHONY: all libft clean fclean re